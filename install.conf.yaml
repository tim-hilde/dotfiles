- defaults:
    link:
      relink: true
      create: true
    force: true

- link:
    $HOME/.aliases:
      relative: true
    $HOME/.config/bat:
      path: bat
      relative: true
      create: true
    $HOME/.zshrc:
      relative: true
    $HOME/.zprofile:
      relative: true
    $HOME/.gitconfig:
      path: git/gitconfig
      relative: true
    $HOME/.p10k.zsh:
    $HOME/.ssh/config:
      if: '[ `uname` =~ Darwin ]'
      path: config_ssh
      relative: true
    $HOME/Library/Application Support/Code/User/settings.json:
      if: '[ `uname` =~ Darwin ]'
      path: vscode/settings.json
      relative: true
      create: true
    $HOME/Library/Application Support/Code/User/keybindings.json:
      if: '[ `uname` =~ Darwin ]'
      path: vscode/keybindings.json
      relative: true
      create: true
    $HOME/.config/kitty:
      path: kitty
      relative: true
      create: true
      force: true
    $HOME/.config/iterm2:
      if: '[ `uname` =~ Darwin ]'
      path: iterm2
      relative: true
      create: true
    $HOME/.config/karabiner:
      if: '[ `uname` =~ Darwin ]'
      path: karabiner
      relative: true
      create: true
    $HOME/.simplebarrc:
      if: '[ `uname` =~ Darwin ]'
      path: simplebarrc
      relative: true
    $HOME/.config/yazi:
      path: yazi
      relative: true
      create: true

- shell:
  -
    command: if [[ ! `uname` =~ Darwin ]]; then sudo apt update; fi
    description: Updating apt
    quiet: true
  -
    command: if [[ ! `uname` =~ Darwin ]]; then sudo apt install -y zsh; fi
    description: Installing zsh
    quiet: true
  -
    command: sudo chsh -s $(which zsh) $USER && zsh
    description: Make zsh default shell
    quiet: true
  -
    command: curl -L https://sw.kovidgoyal.net/kitty/installer.sh | sh /dev/stdin
    description: Installing kitty
    quiet: true
  -
    command: if [[ ! -d "$HOME/.oh-my-zsh" ]]; then git clone https://github.com/ohmyzsh/ohmyzsh.git ~/.oh-my-zsh; fi
    description: Installing oh-my-zsh
    quiet: true
  -
    command: if [[ `uname` =~ Darwin ]]; then ssh-add --apple-use-keychain $HOME/.ssh/id_ed25519; fi
    quiet: true
  -
    command: if [[ ! -d "$HOME/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting" ]]; then git clone https://github.com/zsh-users/zsh-syntax-highlighting.git $HOME/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting; fi
    description: Installing zsh syntax highlighting
    quiet: true
  -
    command: wget -P $HOME/.zsh https://raw.githubusercontent.com/catppuccin/zsh-syntax-highlighting/main/themes/catppuccin_mocha-zsh-syntax-highlighting.zsh
    description: Installing zsh syntax highlighting cattpuccin theme
    quiet: true
  -
    command: if [[ ! -d "$HOME/.oh-my-zsh/custom/themes/powerlevel10k" ]]; then git clone --depth=1 https://github.com/romkatv/powerlevel10k.git $HOME/.oh-my-zsh/custom/themes/powerlevel10k; fi
    description: Installing powerlevel10k theme
    quiet: true
  -
    command: if [[ ! -d "$HOME/.oh-my-zsh/custom/plugins/zsh-bat" ]]; then git clone https://github.com/fdellwing/zsh-bat.git $HOME/.oh-my-zsh/custom/plugins/zsh-bat; fi
    description: Installing bat zsh plugin
    quiet: true
  -
    command: if [[ ! -d "$HOME/.oh-my-zsh/custom/plugins/you-should-use" ]]; then git clone https://github.com/MichaelAquilina/zsh-you-should-use.git $HOME/.oh-my-zsh/custom/plugins/you-should-use; fi
    description: Installing you should use plugin
    quiet: true
  -
    command: if [[ ! -d "$HOME/.pyenv" ]]; then curl https://pyenv.run | bash; fi
    description: Installing pyenv
    quiet: true
  -
    command: if [[ `uname` =~ Linux ]]; fi echo 'export PYENV_ROOT="$HOME/.pyenv"' >> ~/.bashrc && echo 'command -v pyenv >/dev/null || export PATH="$PYENV_ROOT/bin:$PATH"' >> ~/.bashrc && echo 'eval "$(pyenv init -)"' >> ~/.bashrc
    quiet: true
  -
    command: if [[ `uname` =~ Linux ]]; then sudo apt-get install -y make build-essential libssl-dev zlib1g-dev libbz2-dev libreadline-dev libsqlite3-dev wget curl llvm libncursesw5-dev xz-utils tk-dev libxml2-dev libxmlsec1-dev libffi-dev liblzma-dev python3-dev; fi
    description: Installing python dependencies
    quiet: true
  -
    command: yes N | pyenv install 3.10.6 && pyenv global 3.10.6
    description: Installing python 3.10.6
    quiet: true
    stderr: true
  -
    command: pip install --upgrade pip
    quiet: true
  -
    command: curl -sSL https://install.python-poetry.org | python3 -
    quiet: true
  -
    command: NONINTERACTIVE=1 /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
    description: Installing homebrew
    quiet: true
  -
    command: if [[ `uname` =~ Linux ]]; then eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"; fi
    quiet: true
  -
    command: brew bundle --file=brew/Brewfile
    description: Installing from brewfile
    stdout: true
    quiet: true
  -
    command: if [[ `uname` =~ Darwin ]]; then git clone https://github.com/Jean-Tinland/simple-bar $HOME/Library/Application\ Support/Ãœbersicht/widgets/simple-bar; fi
    quiet: true
  -
    command: bat cache --build
    quiet: true
  -
    command: exec zsh
    quiet: true
