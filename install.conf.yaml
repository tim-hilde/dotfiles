- defaults:
    link:
      relink: true
      create: true
    force: true

- create:
  - $HOME/.oh-my-zsh/custom/plugins

- shell:
  -
    command: if [[ ! `uname` =~ Darwin ]]; then sudo apt update; fi
    description: Updating apt
    quiet: true
  -
    command: if [[ ! `uname` =~ Darwin ]]; then sudo apt install -y zsh; fi
    description: Installing zsh
    quiet: true
    stdin: true
  -
    command: chmod +x scripts/setup_zsh.sh  && chmod +x scripts/setup_git.sh
    description: Set execute permission on scripts
    quiet: true
  -
    command: sh ./scripts/setup_zsh.sh
    description: Make zsh default shell
    quiet: true
  -
    command: curl -L https://sw.kovidgoyal.net/kitty/installer.sh | sh /dev/stdin
    description: Installing kitty
    quiet: true
  -
    command: if [[ ! -d "$HOME/.oh-my-zsh" ]]; then yes | sh -c "$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"; fi
    description: Installing oh-my-zsh
    quiet: true
  -
    command: if [[ ! -d "$HOME/.pyenv" ]]; then git clone https://github.com/pyenv/pyenv.git $HOME/.pyenv; fi
    description: Installing pyenv
    quiet: true
  -
    command: if [[ ! -d "$HOME/.pyenv/plugins/pyenv-virtualenv" ]]; then git clone https://github.com/pyenv/pyenv-virtualenv.git $HOME/.pyenv/plugins/pyenv-virtualenv; fi
    quiet: true
  -
    command: if [[ `uname` =~ Darwin ]]; then ssh-add --apple-use-keychain $HOME/.ssh/id_ed25519; fi
    quiet: true
  -
    command: if [[ ! -d "$HOME/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting" ]]; then git clone https://github.com/zsh-users/zsh-syntax-highlighting.git $HOME/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting; fi
    # description: Installing zsh syntax highlighting
    quiet: true
  -
    command: wget -P $HOME/.zsh https://raw.githubusercontent.com/catppuccin/zsh-syntax-highlighting/main/themes/catppuccin_mocha-zsh-syntax-highlighting.zsh
    # description: Installing zsh syntax highlighting cattpuccin theme
    quit: true
  -
    command: if [[ ! -d "$HOME/.oh-my-zsh/custom/themes/powerlevel10k" ]]; then git clone --depth=1 https://github.com/romkatv/powerlevel10k.git $HOME/.oh-my-zsh/custom/themes/powerlevel10k; fi
    # description: Installing powerlevel10k theme
    quiet: true
  -
    command: if [[ ! -d "$HOME/.oh-my-zsh/custom/plugins/zsh-bat" ]]; then git clone https://github.com/fdellwing/zsh-bat.git $HOME/.oh-my-zsh/custom/plugins/zsh-bat; fi
    # description: Installing bat zsh plugin
    quiet: true
  -
    command: if [[ ! -d "$HOME/.oh-my-zsh/custom/plugins/you-should-use" ]]; then git clone https://github.com/MichaelAquilina/zsh-you-should-use.git $HOME/.oh-my-zsh/custom/plugins/you-should-use; fi
    # description: Installing you should use plugin
    quiet: true
  -
    command: curl -sSfL https://raw.githubusercontent.com/ajeetdsouza/zoxide/main/install.sh | sh
    # description: Installing zoxide
    quiet: true
  -
    command: NONINTERACTIVE=1 /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
    description: Installing homebrew
    quiet: true
  -
    command: brew bundle --file=brew/Brewfile
    # description: Installing from brewfile
    quiet: true
  -
    command: if [[ `uname` =~ Darwin ]]; then git clone https://github.com/Jean-Tinland/simple-bar $HOME/Library/Application\ Support/Ãœbersicht/widgets/simple-bar; fi
    quiet: true

- link:
    $HOME/.aliases:
      relative: true
    $HOME/.config/bat:
      path: bat
      relative: true
      create: true
    $HOME/.zshrc:
      relative: true
    $HOME/.zprofile:
      relative: true
    $HOME/.gitconfig:
      path: git/gitconfig
      relative: true
    $HOME/.p10k.zsh:
    $HOME/.ssh/config:
      if: '[ `uname` =~ Darwin ]'
      path: config_ssh
      relative: true
    $HOME/Library/Application Support/Code/User/settings.json:
      if: '[ `uname` =~ Darwin ]'
      path: vscode/settings.json
      relative: true
      create: true
    $HOME/Library/Application Support/Code/User/keybindings.json:
      if: '[ `uname` =~ Darwin ]'
      path: vscode/keybindings.json
      relative: true
      create: true
    $HOME/.config/kitty:
      path: kitty
      relative: true
      create: true
    $HOME/.config/iterm2:
      if: '[ `uname` =~ Darwin ]'
      path: iterm2
      relative: true
      create: true
    $HOME/.config/karabiner:
      if: '[ `uname` =~ Darwin ]'
      path: karabiner
      relative: true
      create: true
    $HOME/.simplebarrc:
      if: '[ `uname` =~ Darwin ]'
      path: simplebarrc
      relative: true
    $HOME/.config/yazi:
      path: yazi
      relative: true
      create: true
- shell:
  -
    command: exec zsh
    description: Restarting shell
- shell:
  -
    command: sh ./scripts/setup_git.sh
    description: Setting up git
  -
    command: pyenv install 3.10.6 && pyenv global 3.10.6
  -
    command: pip install --upgrade pip
  -
    command: curl -sSL https://install.python-poetry.org | python3 -
    quiet: true
